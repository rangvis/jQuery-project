"use strict";$.ajax({url:"http://47.112.249.18/shangpin?",dataType:"json",data:{ids:location.search.substr(1)}}).then(function(c){var n=c.data.list[0],t=n.shop_info.spec_v2[0].spec_values,e="";t.forEach(function(n,t){e+="<li>".concat(n.show_name,"</li>")});var i,a=n.sku_info[0].ali_image;i=' <div class="gallery">\n    \x3c!-- 可选择的小图片 --\x3e\n    <ul class="small-img choice-btn">\n        \n    </ul>\n\n    \x3c!-- 左边的商品展示的图片 --\x3e\n    <ul class="big-img small">\n\n        <li>\n            <img src='.concat(a,' alt="">\n            \x3c!-- 贴膜 --\x3e\n            <div class="wrap"></div>   \n        </li>\n        \n        \x3c!--商品展示里的正方形小盒子 --\x3e\n        <span class="grayBox"></span>\n    </ul>\n\n    \x3c!-- 右边放大镜效果的图片 --\x3e\n    <div class="fangdajing big">\n        <img src=').concat(a,' alt="">\n    </div>\n</div>\n\n<div class="item-information">\n    <article class="item-title">\n        <h1>').concat(n.name,"</h1>\n        <h2>").concat(n.shop_info.spu_sub_title?n.shop_info.spu_sub_title:"",'\n        </h2>\n        <figure class="item-price">\n            <span class="now-price">\n                <em>¥</em>\n                <i>').concat(n.price,'</i>\n\n            </span>\n        </figure>\n    </article>\n    \x3c!-- 促销活动 --\x3e\n    <article class="sale-active">\n        <span>促销活动</span>\n        <div class="active-info">\n            <figure class="tag tag-yellow">直降</figure>\n            <i>自营配件 限时直降</i>\n        </div>\n    </article>\n\n    \x3c!-- 颜色选择 --\x3e\n    <article class="color-sel">\n        <span>颜色选择</span>\n        <ul class="color-list">\n        ').concat(e,'\n        </ul>\n    </article>\n\n    \x3c!-- 数量选择 --\x3e\n    <article class="num-sel">\n        <span>数量选择</span>\n        <div class="num-btn">\n            <div class="jian-btn"></div>\n            <i class="num">1</i>\n            <div class="add-btn"></div>\n        </div>\n    </article>\n\n    \x3c!-- 服务说明 --\x3e\n    <article class="baoyou">\n        <span>服务说明</span>\n        <i>* 满 99 包邮</i>\n    </article>\n</div>\n\n'),$(".goods-info").html(i),$(".bar-price span").html(parseInt($(".now-price i").html()));var o,l=n.shop_info.tpl_content.base.images.ali_mobile.url[0],r="<img src=".concat(l,">");$(".product").html(r);var s=JSON.parse(localStorage.getItem(location.search));o=s?JSON.parse(localStorage.getItem(location.search)).count:0,$(".add-btn").on("click",function(){var n=parseInt($(".num").html());$(".num").html(n),$(".bar-price span").html(parseInt($(".now-price i").html())*n),o=$(".num").html(),data_loc=JSON.parse(localStorage.getItem(location.search)),o++,localStorage.setItem(location.search,JSON.stringify(data_loc)),n++}),$(".jian-btn").on("click",function(){var n=parseInt($(".num").html());1==n?$(this).css({cursor:"not-allowed"}):$(this).css({cursor:"pointer"}),$(".num").html(n),$(".bar-price span").html($(".now-price i").html()*n),o=$(".num").html(),data_loc=JSON.parse(localStorage.getItem(location.search)),o--,localStorage.setItem(location.search,JSON.stringify(data_loc)),n--});$(".choiced-good h2 i").html();$(".choiced-good h2 i").html($(".item-title h1").html());new Magnifier;var u=document.querySelector(".add-cart");o=$(".num").html(),u.onclick=function(){var n=location.search.indexOf("="),t=location.search.substr(n+1),e=(c.data.list[0],JSON.parse(localStorage.getItem(location.search))?JSON.parse(localStorage.getItem(location.search)):{});e.count?e.count=parseInt(e.count)+parseInt(o):(e=c.data.list[0]).count=parseInt(document.querySelector(".num").innerHTML),localStorage.setItem(t,JSON.stringify(e)),alert("加入购物车成功")},$(".now-buy").on("click",function(){location.href="./cart.html"});var p=document.querySelector(".add-btn"),m=document.querySelector(".num"),d=document.querySelector(".jian-btn"),h=document.querySelector(".choiced-good h2 span"),f=document.querySelector(".bar-price span");p.onclick=function(){m.innerHTML++,h.innerText=m.innerHTML,f.innerHTML=n.price*h.innerText},d.onclick=function(){m.innerHTML--,h.innerText=m.innerHTML,f.innerHTML=n.price*h.innerText,m.innerHTML<1&&(m.innerHTML=1,h.innerText=1,f.innerHTML=n.price,d.style.cursor="not-allowed")},f.innerHTML=n.price*h.innerText});var ret_top=document.querySelector(".sec-fixed");function throttling(n,t){var e=null;return function(){if(null!==e)return!1;e=setTimeout(function(){e=null,n()},t)}}ret_top.onclick=function(){window.scrollTo({top:0,behavior:"smooth"})};var product_fix=document.querySelector(".product-fix-bar"),ele_offsetTop=product_fix.offsetTop,ele_height=product_fix.offsetHeight;window.onscroll=throttling(function(){window.scrollY+innerHeight-ele_height<ele_offsetTop?(product_fix.style.position="fixed",product_fix.style.bottom="0"):product_fix.style.position="static"},100);