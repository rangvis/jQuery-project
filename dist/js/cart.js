"use strict";function render(){for(var e="",t=0;t<localStorage.length;t++){var n=JSON.parse(localStorage.getItem(localStorage.key(t)));null!==n&&(e+='<div class="cart-item">\n    <div class="choice-btn single-btn" i="true"></div>\n\n    <div class="item-img">\n        <img src='.concat(n.shop_info.ali_image?n.shop_info.ali_image:n.sku_info[0].ali_image,'\n            alt="">\n    </div>\n\n    <div class="item-name">\n        <h2>').concat(n.shop_info.title?n.shop_info.title:n.sku_info[0].title,"</h2>\n        <h3>").concat(n.product_info.category_id_cn,'</h3>\n    </div>\n\n    <div class="opertion sel">\n        <div class="delete-btn" key=').concat(localStorage.key(t),'>\n\n        </div>\n    </div>\n\n    <div class="subtotal sel">\n        <i>￥</i>\n        <span>').concat(n.price*n.count,'</span>\n    </div>\n\n    <article class="num-sel">\n\n        <div class="num-btn">\n            <div class="jian-btn" key=').concat(localStorage.key(t),'></div>\n            <i class="num">').concat(n.count,'</i>\n            <div class="add-btn" key=').concat(localStorage.key(t),'></div>\n        </div>\n    </article>\n\n    <div class="price">\n        <i>¥</i>\n        <span>').concat(n.price,"</span>\n    </div>\n</div>"))}$(".cart-group").html(e)}function render2(){var e="";e=0===localStorage.length?'<div class="empty-label">\n        <h3>您的购物车中还没有商品</h3>\n        <a href="./login.html" class="login-btn">登录</a>\n                <a href="./index.html" class="index-btn">现在选购</a>\n        </div>':'   <div class="all-choice">\n        <div class="choice-btn all-btn" i="true"></div>\n        <span >全选</span>\n        <i class="del-choiced">删除选中的商品</i>\n        </div>\n\n        <div class="shop-box">\n        <div class="shop-num">\n            <h4>\n                已选择\n                <i>1</i>\n                件商品\n            </h4>\n            <h5>\n                共计\n                <i>1</i>\n                件商品\n            </h5>\n        </div>\n\n        <div class="shop-price">\n            <h4>\n                应付总额：\n                <span>￥</span>\n                <i>199.00</i>\n            </h4>\n        </div>\n        </div>\n\n        <div class="now-buy">\n        现在结算\n        </div>',$(".cart-buttom").html(e),rendermoney()}render(),render2();var page_cart=document.querySelector(".page-cart"),num=document.querySelector(".num");function rendermoney(){for(var e=document.querySelector(".shop-price i"),t=document.querySelectorAll(".subtotal span"),n=document.querySelectorAll(".num-btn i"),r=document.querySelector(".shop-num h5 i"),a=document.querySelectorAll(".price span"),i=document.querySelectorAll(".single-btn"),l=document.querySelector(".shop-num h4 i"),c=0,o=0,s=0,g=0,u=0;u<t.length;u++)o+=parseInt(n[u].innerHTML),"false"!=i[u].getAttribute("i")&&(g+=parseInt(n[u].innerHTML),c+=s=parseInt(a[u].innerHTML)*n[u].innerHTML,t[u].innerHTML=s,s=0);e.innerHTML=c,r.innerHTML=o,l.innerHTML=g}page_cart.addEventListener("click",function(e){var t;"add-btn"===e.target.className&&((t=JSON.parse(localStorage.getItem(e.target.getAttribute("key")))).count++,localStorage.setItem(e.target.getAttribute("key"),JSON.stringify(t)),e.target.previousElementSibling.innerHTML=t.count,rendermoney());"jian-btn"===e.target.className&&((t=JSON.parse(localStorage.getItem(e.target.getAttribute("key")))).count--,localStorage.setItem(e.target.getAttribute("key"),JSON.stringify(t)),e.target.nextElementSibling.innerHTML=t.count,t.count<2&&(e.target.nextElementSibling.innerHTML=1,t.count=1,e.target.style.cursor="not-allowed"),rendermoney());if("choice-btn single-btn"===e.target.className&&("true"==e.target.getAttribute("i")?(e.target.style.background="url(../images/un-checked.png) no-repeat",e.target.style.backgroundSize="contain",e.target.setAttribute("i","false")):(e.target.style.background="url(../images/checked.png) no-repeat",e.target.style.backgroundSize="contain",e.target.setAttribute("i","true")),rendermoney()),"choice-btn all-btn"==e.target.className){var n=document.querySelectorAll(".single-btn");if("true"==e.target.getAttribute("i")){e.target.style.background="url(../images/un-checked.png) no-repeat",e.target.style.backgroundSize="contain",e.target.setAttribute("i","false");for(var r=0;r<n.length;r++)n[r].style.background="url(../images/un-checked.png) no-repeat",n[r].style.backgroundSize="contain",n[r].setAttribute("i","false"),console.log(n[r])}else{e.target.style.background="url(../images/checked.png) no-repeat",e.target.style.backgroundSize="contain",e.target.setAttribute("i","true");for(r=0;r<n.length;r++)n[r].style.background="url(../images/checked.png) no-repeat",n[r].style.backgroundSize="contain",n[r].setAttribute("i","true")}rendermoney()}if("delete-btn"===e.target.className){console.log(e.target.getAttribute("key"));var a=e.target.getAttribute("key");localStorage.getItem(a),localStorage.removeItem(a),render(),rendermoney(),0===localStorage.length&&render2()}if("del-choiced"===e.target.className){n=document.querySelectorAll(".single-btn");var i=document.querySelectorAll(".delete-btn");for(r=0;r<n.length;r++)if("true"==n[r].getAttribute("i")){a=i[r].getAttribute("key");localStorage.removeItem(a)}render(),rendermoney()}});